# ğŸš€ å…¨çƒç§‘æŠ€æ–°é—»è‡ªåŠ¨åŒ–ç³»ç»Ÿ - éƒ¨ç½²è¯´æ˜

## âœ… ç³»ç»Ÿå·²å®Œæˆé…ç½®

æœ¬ç³»ç»Ÿå·²é…ç½®å®Œæˆï¼Œå¯ä»¥æ¯å¤©æ—©ä¸Š8:30è‡ªåŠ¨è·å–å…¨çƒé«˜ç§‘æŠ€å…¬å¸æ–°é—»ï¼Œç”Ÿæˆå°çº¢ä¹¦é£æ ¼å›¾ç‰‡ã€‚

## ğŸ”‘ é‡è¦ï¼šé…ç½®æ–°é—»APIå¯†é’¥

**åœ¨ä½¿ç”¨çœŸå®æ–°é—»æ•°æ®å‰ï¼Œéœ€è¦é…ç½®è‡³å°‘ä¸€ä¸ªæ–°é—»APIå¯†é’¥ã€‚**

### å¿«é€Ÿé…ç½®ï¼ˆæ¨èNewsAPIï¼‰

1. è®¿é—® https://newsapi.org/ æ³¨å†Œè´¦å·
2. è·å–å…è´¹APIå¯†é’¥
3. ç¼–è¾‘ `run.sh` å¡«å…¥å¯†é’¥ï¼š
   ```bash
   export NEWSAPI_KEY="your_api_key_here"
   ```

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ `APIé…ç½®æŒ‡å—.md`

## ğŸ“ é¡¹ç›®ç»“æ„

```
tech-news-automation/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ run.sh                  # è¿è¡Œè„šæœ¬ï¼ˆè®¾ç½®ç¯å¢ƒå˜é‡ï¼‰
â”œâ”€â”€ install.sh              # å®‰è£…è„šæœ¬
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ crontab.txt            # Crontabé…ç½®ç¤ºä¾‹
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ ä½¿ç”¨æŒ‡å—.md            # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ éƒ¨ç½²è¯´æ˜.md            # æœ¬æ–‡ä»¶
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ news_fetcher.py    # æ–°é—»è·å–æ¨¡å—
â”‚   â”œâ”€â”€ image_generator.py # å›¾ç‰‡ç”Ÿæˆæ¨¡å—
â”‚   â””â”€â”€ getnote_sender.py  # Getç¬”è®°å‘é€æ¨¡å—
â”œâ”€â”€ systemd/
â”‚   â”œâ”€â”€ tech-news.service  # SystemdæœåŠ¡æ–‡ä»¶
â”‚   â””â”€â”€ tech-news.timer    # Systemdå®šæ—¶å™¨æ–‡ä»¶
â”œâ”€â”€ output/                # è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ tech_news_cover.jpg    # å°é¢å›¾ç‰‡
â”‚   â”œâ”€â”€ tech_news_detail.jpg   # è¯¦æƒ…å›¾ç‰‡
â”‚   â”œâ”€â”€ tech_news_summary.jpg  # æ€»ç»“å›¾ç‰‡
â”‚   â””â”€â”€ YYYYMMDD/              # æ¯æ—¥ç¬”è®°ç›®å½•
â””â”€â”€ logs/                  # æ—¥å¿—ç›®å½•
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
cd /mnt/okcomputer/output/tech-news-automation
bash install.sh
```

### 2. æµ‹è¯•è¿è¡Œ

```bash
python3 main.py --test
```

æµ‹è¯•å®Œæˆåï¼ŒæŸ¥çœ‹ `output/` ç›®å½•ä¸‹çš„å›¾ç‰‡ï¼š
- `tech_news_cover.jpg` - å°é¢å›¾ç‰‡
- `tech_news_detail.jpg` - è¯¦æƒ…å›¾ç‰‡  
- `tech_news_summary.jpg` - æ€»ç»“å›¾ç‰‡

### 3. è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰

#### æ–¹å¼Aï¼šCrontabï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰

```bash
crontab -e
```

æ·»åŠ ä»¥ä¸‹è¡Œï¼š
```
30 8 * * * cd /mnt/okcomputer/output/tech-news-automation && ./run.sh
```

ä¿å­˜å¹¶é€€å‡ºã€‚

#### æ–¹å¼Bï¼šSystemd Timerï¼ˆLinuxç³»ç»Ÿï¼‰

```bash
# å¤åˆ¶æœåŠ¡æ–‡ä»¶
sudo cp systemd/tech-news.service /etc/systemd/system/
sudo cp systemd/tech-news.timer /etc/systemd/system/

# ç¼–è¾‘æœåŠ¡æ–‡ä»¶ï¼Œä¿®æ”¹ç”¨æˆ·åå’Œè·¯å¾„
sudo nano /etc/systemd/system/tech-news.service

# é‡æ–°åŠ è½½systemd
sudo systemctl daemon-reload

# å¯ç”¨å¹¶å¯åŠ¨å®šæ—¶å™¨
sudo systemctl enable tech-news.timer
sudo systemctl start tech-news.timer

# éªŒè¯å®šæ—¶å™¨
sudo systemctl list-timers --all
```

## ğŸ“¤ å‘é€åˆ°Getç¬”è®°

### å½“å‰æ–¹å¼ï¼šæœ¬åœ°ä¿å­˜ + æ‰‹åŠ¨å¯¼å…¥

ç”±äºGetç¬”è®°APIç›®å‰ä¸»è¦æä¾›çŸ¥è¯†åº“æŸ¥è¯¢åŠŸèƒ½ï¼Œç³»ç»Ÿé‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

1. **è‡ªåŠ¨ç”Ÿæˆ**ï¼šæ¯å¤©8:30è‡ªåŠ¨ç”Ÿæˆå†…å®¹åˆ° `output/YYYYMMDD/` ç›®å½•
2. **æ‰‹åŠ¨å¯¼å…¥**ï¼šç”¨æˆ·ä»Getç¬”è®°APPä¸­å¯¼å…¥å†…å®¹

### å¯¼å…¥æ­¥éª¤

1. æ‰“å¼€Getç¬”è®°APPæˆ–è®¿é—® https://www.biji.com
2. ç‚¹å‡»"æ–°å»ºç¬”è®°"
3. å¤åˆ¶ `output/YYYYMMDD/note.txt` çš„å†…å®¹
4. æ·»åŠ 3å¼ å›¾ç‰‡ï¼ˆæŒ‰é¡ºåºé€‰æ‹©image_1, image_2, image_3ï¼‰
5. ä¿å­˜ç¬”è®°

### æœªæ¥å‡çº§ï¼šè‡ªåŠ¨å‘é€

Getç¬”è®°æ­£åœ¨å¼€å‘åˆ›å»ºç¬”è®°çš„APIï¼Œå±Šæ—¶å¯ä»¥ï¼š
1. åœ¨ `run.sh` ä¸­é…ç½® `GETNOTE_API_KEY`
2. ç³»ç»Ÿå°†è‡ªåŠ¨å‘é€ç¬”è®°åˆ°Getç¬”è®°

## ğŸ“Š æŸ¥çœ‹è¿è¡ŒçŠ¶æ€

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/tech-news-$(date +%Y%m%d).log

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
ls -la logs/
```

### æŸ¥çœ‹å®šæ—¶ä»»åŠ¡

```bash
# Crontabæ–¹å¼
crontab -l

# Systemdæ–¹å¼
sudo systemctl status tech-news.timer
sudo systemctl list-timers --all
```

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹è¿è¡Œæ—¶é—´

#### Crontabæ–¹å¼

```bash
crontab -e
```

ä¿®æ”¹æ—¶é—´ï¼ˆä¾‹å¦‚æ”¹ä¸º9:00ï¼‰ï¼š
```
0 9 * * * cd /mnt/okcomputer/output/tech-news-automation && ./run.sh
```

Crontabæ—¶é—´æ ¼å¼ï¼š
```
* * * * * å‘½ä»¤
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ æ˜ŸæœŸ (0-7, 0å’Œ7éƒ½æ˜¯å‘¨æ—¥)
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€ æœˆä»½ (1-12)
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€ æ—¥æœŸ (1-31)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0-59)
```

#### Systemdæ–¹å¼

ç¼–è¾‘ `systemd/tech-news.timer`ï¼š

```ini
[Timer]
# æ¯å¤©9:00è¿è¡Œ
OnCalendar=*-*-* 09:00:00
```

ç„¶åé‡æ–°åŠ è½½ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl restart tech-news.timer
```

### ä¿®æ”¹æ–°é—»å†…å®¹

ç¼–è¾‘ `scripts/news_fetcher.py`ï¼š

```python
# ä¿®æ”¹æ–°é—»ç±»åˆ«
categories = ["äººå·¥æ™ºèƒ½", "ç¡¬ä»¶è®¾å¤‡", "è‡ªåŠ¨é©¾é©¶", "èŠ¯ç‰‡", "å…ƒå®‡å®™", "èˆªå¤©"]

# ä¿®æ”¹æ–°é—»æ•°é‡
news = self.news_fetcher.fetch_news(num_results=15)  # é»˜è®¤10æ¡
```

### ä¿®æ”¹å›¾ç‰‡é£æ ¼

ç¼–è¾‘ `scripts/image_generator.py`ï¼š

```python
# ä¿®æ”¹é…è‰²
colors = {
    'primary': (255, 107, 107),    # ä¸»è‰²è°ƒ
    'secondary': (78, 205, 196),   # æ¬¡è‰²è°ƒ
    # ...
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œ

```bash
# 1. æ£€æŸ¥cronæœåŠ¡
sudo service cron status

# 2. æ£€æŸ¥crontab
crontab -l

# 3. æŸ¥çœ‹cronæ—¥å¿—
grep CRON /var/log/syslog

# 4. æ‰‹åŠ¨æµ‹è¯•
cd /mnt/okcomputer/output/tech-news-automation && ./run.sh
```

### å›¾ç‰‡ç”Ÿæˆå¤±è´¥

```bash
# 1. æ£€æŸ¥Pillow
pip3 show Pillow

# 2. é‡æ–°å®‰è£…
pip3 install --upgrade Pillow

# 3. æ£€æŸ¥å­—ä½“
fc-list :lang=zh
```

### ä¸­æ–‡å­—ä½“é—®é¢˜

```bash
# å®‰è£…ä¸­æ–‡å­—ä½“
sudo apt-get install fonts-noto-cjk

# åˆ·æ–°å­—ä½“ç¼“å­˜
fc-cache -fv
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. `ä½¿ç”¨æŒ‡å—.md` - è¯¦ç»†ä½¿ç”¨è¯´æ˜
2. `README.md` - é¡¹ç›®ä»‹ç»
3. `logs/` ç›®å½• - è¿è¡Œæ—¥å¿—

## ğŸ‰ å®Œæˆï¼

ç³»ç»Ÿå·²é…ç½®å®Œæˆï¼Œæ˜å¤©æ—©ä¸Š8:30å°†è‡ªåŠ¨ç”Ÿæˆç¬¬ä¸€ä»½ç§‘æŠ€æ–°é—»æ—©æŠ¥ï¼

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š
1. æ‰‹åŠ¨è¿è¡Œ `python3 main.py --test` æŸ¥çœ‹ç”Ÿæˆçš„å›¾ç‰‡
2. æ£€æŸ¥ `output/` ç›®å½•
3. æŸ¥çœ‹ `logs/` ç›®å½•çš„æ—¥å¿—æ–‡ä»¶
